<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="Bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/challenge.css">
    <style>




        /* #box5 {
            background: url('./images/challenge_5_ld/LD_2_Pg3 BG.png')no-repeat center center;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
            max-width: 1920px;
            position: absolute;

        } */

        #box2 {
           background: url('images/challenge_5_ld/2_Video-BG.png');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;
        }        
        #box3 {
            background: url('./images/challenge_5_ld/8_Img1-coolant.png') no-repeat center center;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
            max-width: 1920px;
            position: absolute;
            overflow: hidden !important;
        }
        .col-xl-4 {
            padding: 50px;
        }

#box4 .plus-1, #box4 .plus-2, #box4 .plus-3{
    width: auto;
    top: 0;

    display: flex;
justify-content: center;
}

#box4 .plus-1 div:nth-child(2) {
    z-index: 1;
    top: 0;
    left: unset;
}
#box4 .plus-2 div:nth-child(2) {
    z-index: 1;
    top: 0;
    left: unset;
}
#box4 .plus-3 div:nth-child(2) {
    z-index: 1;
    top: 0;
    left: unset;
}
/* #box2 .plus-2 div:nth-child(2) {
    left: 67%;
    top: 60%;
	z-index: 1;
}
#box2 .plus-3 div:nth-child(2) {
    left: 5%;
    top: 31%;
	z-index: 4;
}
#box2 .plus-4 div:nth-child(2) {
    left: 67%;
    top: 87%;
	z-index: 4;
}

#box2 .plus-5 div:nth-child(2) {
    left: 5%;
    top: 86%;
	z-index: 4;
} */

.challenge-1-vps #box4 .content-box-1 {

    top: 20px;
 
    z-index: 5;
    min-width: 100%;
}

.challenge-1-vps #box4 .content-box-2 {

    top: 20px;

    z-index: 5;
    min-width: 100%;
}

.challenge-1-vps #box4 .content-box-3 {

    top: 20px;

    z-index: 5;
    min-width: 100%;
}

.bottle-img > img {
    max-height: 30vh;
    min-height: auto;
    max-width: 30vw;
    width: auto;
    height: auto;
}


/* .challenge-9 #box2 .content-box-2 {
    right: 19%;
    bottom: 35%;
    min-width: 460px;
    z-index: 5;
}
.challenge-9 #box2 .content-box-3 {
    left: 19%;
    top: 35%;
    min-width: 460px;
    z-index: 5;
}
.challenge-9 #box2 .content-box-4 {
    right: 20%;
    bottom: 9%;
    min-width: 460px;
    z-index: 5;
}
.challenge-9 #box2 .content-box-5 {
    left: 16%;
    bottom: 10%;
    min-width: 460px;
    z-index: 4;
}
.challenge-9 #box8 #content {
height: 70% !important;
} */


#box4 .btl-plus-container > .bottle-img, #box4 .btl-img-container > .bottle-img {
    min-width: 200px;
    max-height: 80vh;
    min-height: auto;
    max-width: 200px;
    padding: 0 !important;
}

#box4 .btl-plus-container > .bottle-img > img, #box4 .btl-img-container > .bottle-img > img {
    padding: 0 !important;
}
.hotspot-continue {
    z-index: 3 !important;
}

.break {
    flex-basis: 100%;
    height: 0;
}

.reveal-arrow-left {
    max-width: 500px;
    min-width: 450px;
    height: 71px;
    padding-left: 140px;
    padding-right: 140px;
    cursor: auto;
    background: url(./images/challenge_2/images/Arrow_UP.png) no-repeat;
}
.flex-container{
min-height:100px;
display:flex;
align-items:center;
}
.flex-container:after{
content:'';
min-height:inherit;
font-size:0;
}

.flex-box {
    display:flex;
    justify-content: space-between;

}

.bottle-img {
    width:290px;
}

.flex-box .spacer{ width: 50px; background-color: pink;}

.clk-reveal-plus {

    top:0;
}

.clk-reveal-plus:hover {

    top:0;
}

#box1 > #content {
    height: 95% !important;
}

#box4 .bottle-img > img {
    padding-top: 10%;
}

#play-btn {
    width: 150px;
    height: 150px;
    background: url(images/challenge_5_ld/2_Btn-VideoPlay-UP.png) no-repeat;
    float: left;
    cursor: pointer;
}

@media only screen and (max-width: 1290px) {
    .reveal-arrow-left {
        height: 71px;
    color: #fff !important;
    background: none;
    padding-left: 140px !important;
    padding-right: 140px !important;
    max-width: 500px !important;
    min-width: 450px !important;
    background: url(../images/challenge_2/images/Arrow_UP.png) no-repeat;
}
}
@media only screen and (max-width: 999px){
	.hotspot-continue > button, .flashCard-continue > button {
		min-width: 200px !important;
	}
	.center-content {
		padding: 35px 35px !important;
	}
    .spacer {
  flex-basis: 100%;
  height: 0;
}

.hotspot-continue > button, .flashCard-continue > button {
    min-width: 230px !important;
}


}
@media only screen and (max-width: 1039px) {
.reveal-arrow-left {
    height: auto;
    color: black !important;
    background: none;
    min-width: 220px !important;
}
}
@media only screen and (max-width: 550px) {
.top-text {
    top: -80px;
}
.center-content {
    padding: 7% 5% !important;
}
.content-box {
width: 80%;
    min-width: 275px !important;
}

.clk-reveal-plus, .clk-reveal-plus:hover, .clk-reveal-x, .clk-reveal-x:hover, .clk-reveal-complete-plus, .clk-reveal-complete-plus:hover, .clk-reveal-complete-x, .clk-reveal-complete-x:hover {
    background-size: 8vw;
}


}
@media only screen and (max-width: 999px) {

    #box1 > #content {
        height: unset !important;
    }

    .challenge-1-vps #box5 {
        background: none;
    }
}
@media only screen and (max-width: 1790px) {
    .hotspot-continue {
    min-width: 750px;
    -webkit-box-pack: center;
    justify-content: center;
    position: relative !important;
}
}


@media only screen and (max-width: 999px){
.remediation {
    width: 100%;
    left: auto;

    min-width: 270px !important;
    position: absolute;
    height: 100%;
    min-height: 552px;
    top: -360px;
    margin-top: 50px !important;
}
}

@media only screen and (max-width: 576px) {

#box3 {
    background: none;
    overflow: auto !important;
}
}
    </style>
    <title>Vcert Project</title>
</head>
<style>

</style>

<body>
    <div class="container-fluid challenge-1-vps">
        <!-- Intro -->
        <div class="box " id="box1">
            <div class="row" id="content">
                <div class="col topCenterText ">
                    <div class='center-text-box'>
                        <h1>VPERK$</h1>
                        <p>
                            <font class="emphasisBold"></font>Installers in small towns and large cities all report the same concern—bringing in business at a steady rate.
                        </p>
                        <p>
                            In a competitive marketplace where companies are continually changing strategies and service offerings in an attempt to bring in new customers, it can be difficult to build and maintain a consistent consumer base. 
                        </p>
                        <p>
                            In this <font class="emphasisBold">PERFORMANCE+ CHALLENGE</font>, you’ll see how <font class="emphasisBold">Valvoline™ VPERK$</font> helps installers overcome that challenge.
                        </p>
                    </div>
                </div>
                <div class="col-1"></div>
                <div class="col topCenterText m-margin-bottom">
                    <div>
                        <button class="next" id="start-btn" type="submit">START</button>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Video -->
        <div id="box2" class="box">
            <div class='back-btn'>
                <img src="">BACK
            </div>
            <div id="video-container" style="">
               
                <video id="player1" controls onplay=""
                    onended="$(this).parent().fadeOut(); $('#video-popup-1-mask').css('display','flex').hide().fadeIn(); $('#box2').css('overflow', 'auto'); $('#box2 #content').css('display', 'flex');">
                    <source src="images/challenge_5_ld/VPERK Installer - 2024-1080p-FINAL.mp4">
                </video>
            </div>
            <div id="content" class="row align-middle">
                <div class="col topCenterText">
                    <!-- <div class="padding-50">
                        <div id="play-btn" onclick="playVideo_1() "></div>
                        <h1 class='white-txt video-text m-scale-text'>View Video</h1>
                    </div> -->
                </div>
                <div class="col" style="flex-grow: 1; display: flex; align-items: center; justify-content: center; flex-basis: auto;">
                    <!-- <div class="divider"></div> -->
                    <div id="play-btn" onclick="playVideo_1() "></div>
                </div>
                
                <div class="col topCenterText m-padding">
                    <div class='center-text-box'>
                        <!-- <h4 class='white-txt m-scale-text' style="margin-bottom: 20px;">VIDEO</h4> -->
                        <!-- <h1 class='white-txt m-scale-text'>
                            The key to SPARK is successfully articulating its benefits. This includes the product benefits as well as the performance benefits the consumer and their vehicle will receive. In this video, you’ll see how this is done in a simulated SPARK conversation between an installer counterperson and a customer.
                        </h1> -->
                    </div>
                </div>
                <div id='video-popup-1-mask' class="video-popup">
                    <div class="video-dialog">
                        <div class="video-border">
                        <div id="video-popup-header">
                            <div class="flex-c-sb">
                                <div class="red-dot"></div>CONTINUE?<div class="red-dot"></div>
                            </div>
                        </div>
                            <div class="row video-body">
                                <div class="col flex-middle">
                                <div id="yes-btn" class="next" onclick="">Yes</div>
                            </div>
                            <div class="col flex-middle">
                                <div id="replay-btn" onclick="playVideo_1()">Replay</div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="box m-bg-hide" id="box3">
            <div class='back-btn'>
                <img src="">BACK
            </div>
            <div class="row full-box-height back-padding" id="content">
                <div class="col-lg-5 col-md-6 col-sm-6 col-xs-10" style="text-align: left;">
                    <p>Once a consumer has opted-in to the VPERK$ program, they will be in charge of their own savings.</p>
                    <p>
                        Consumers will receive an email about their promotional offer and amount. Once the service has been performed, the consumer will visit valvolineperks.com where they will upload an invoice clearly showing the purchase of their qualifying Valvoline™ service. 
                    </p>
                    <p>
                        Consumers are highly motivated to protect their investments with preventative
                        maintenance services that will help extend the life of their vehicles and provide peace
                        of mind.
                    </p>



                    <p>This process incentivizes consumers to return to their installer to have new services performed when appropriate.</p>
                </div>
                <div class="col-lg-7 col-md-6 col-sm-6 col-xs-2" style="text-align: left;">
                </div>
                <div class="row continue-anchor" style="padding: 0;">
                    <div class="desktop-br mobile-center">
                        <button class="next continue-btn continue-small-m"
                            style="display: inline-block;">CONTINUE</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- QUESTION 1 -->
        <div id="box4" class="box question-bg-box">
            <div class='back-btn'>
                <img src="">BACK
            </div>
            <div class="row align-middle full-box-height" id="content">
                <div class="col topCenterText m-LeftCol-question back-btn-padding">
                    <div class='center-text-box question-1'>
                        <h1 id="question-num"></h1>
                        <div class='question-text'></div>
                        <div class='answer-container'></div>
                    </div>
                </div>
                <div class="col topCenterText m-RightCol-question">
                    <div class="reveal-btn text-white">
                        <h3>REVEAL ANSWER</h3>
                    </div>
                    <div class="reveal-btn-m text-white">
                        <h3>REVEAL ANSWER</h3>
                    </div>

                    <div class="remediation">
                        <div class="remediation-icon"></div>
                        <div class="remediation-txt"></div>
                        <div class="remediation-continue next">
                            Continue
                        </div>
                        <div class="remediation-retry">
                            Try Again
                            <div class='warn-sel-ans'>
                                Choose an answer and select "Try Again."
                            </div>
                        </div>
                        <div class="attempt-container row">
                            <div class="attempt-1">
                                FIRST ATTEMPT
                            </div>
                            <div class="attempt-2">
                                SECOND ATTEMPT
                            </div>
                            <div class="attempt-3">
                                RETRY IN 7 DAYS
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- QUESTION 2 -->
        <div id="box5" class="box question-bg-box">
            <div class='back-btn'>
                <img src="">BACK
            </div>
            <div class="row align-middle full-box-height" id="content">
                <div class="col topCenterText m-LeftCol-question back-btn-padding">
                    <div class='center-text-box question-2'>
                        <h1 id="question-num"></h1>
                        <div class='question-text'></div>
                        <div class='answer-container'></div>
                    </div>
                </div>
                <div class="col topCenterText m-RightCol-question">
                    <div class="reveal-btn text-white">
                        <h3>REVEAL ANSWER</h3>
                    </div>
                    <div class="reveal-btn-m text-white">
                        <h3>REVEAL ANSWER</h3>
                    </div>

                    <div class="remediation">
                        <div class="remediation-icon"></div>
                        <div class="remediation-txt"></div>
                        <div class="remediation-continue next">
                            Continue
                        </div>
                        <div class="remediation-retry">
                            Try Again
                            <div class='warn-sel-ans'>
                                Choose an answer and select "Try Again."
                            </div>
                        </div>
                        <div class="attempt-container row">
                            <div class="attempt-1">
                                FIRST ATTEMPT
                            </div>
                            <div class="attempt-2">
                                SECOND ATTEMPT
                            </div>
                            <div class="attempt-3">
                                RETRY IN 7 DAYS
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- QUESTION 3 -->
        <div id="box6" class="box question-bg-box">
            <div class='back-btn'>
                <img src="">BACK
            </div>
            <div class="row align-middle full-box-height" id="content">
                <div class="col topCenterText m-LeftCol-question back-btn-padding">
                    <div class='center-text-box question-3'>
                        <h1 id="question-num"></h1>
                        <div class='question-text'></div>
                        <div class='answer-container'></div>
                    </div>
                </div>
                <div class="col topCenterText m-RightCol-question">
                    <div class="reveal-btn text-white">
                        <h3>REVEAL ANSWER</h3>
                    </div>
                    <div class="reveal-btn-m text-white">
                        <h3>REVEAL ANSWER</h3>
                    </div>

                    <div class="remediation">
                        <div class="remediation-icon"></div>
                        <div class="remediation-txt"></div>
                        <div class="remediation-continue next">
                            Continue
                        </div>
                        <div class="remediation-retry">
                            Try Again
                            <div class='warn-sel-ans'>
                                Choose an answer and select "Try Again."
                            </div>
                        </div>
                        <div class="attempt-container row">
                            <div class="attempt-1">
                                FIRST ATTEMPT
                            </div>
                            <div class="attempt-2">
                                SECOND ATTEMPT
                            </div>
                            <div class="attempt-3">
                                RETRY IN 7 DAYS
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- What did we learn today? -->
        <div id="box7" class="box">
            <div class="mask-img" style="position:absolute; top:0; overflow: visible;"><img id="learn-screen-img"
                src="images/Conclsn-Photo_LD.png" style="justify-content: center;"></div>
        <div class="row align-middle learn-box" id="content" style="height: 55% !important;">
            <div class="col-md-12 col-xl-6" style="text-align: left">
                <div>
                    <h1>What Did We Learn Today?</h1>
                    <div>
                        <p><font class="emphasisBold">VPERK$</font> is an innovative consumer engagement platform that is completely unique within the industry. It should help installers drive and retain business opportunities in order to increase sales.</p>
                        <p>If you’re interested in learning more about <font class="emphasisBold">VPERK$</font> you can find training courses in the Valvoline™ Sales Training Center (Internal Valvoline) or Valvoline University™  (Distributor Sales Reps).</p>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-xl-6 learned-continue" style="min-height: 150px;">
                <button class="next continue-btn-center" id="continue-btn-7">CONTINUE</button>
            </div>
        </div>
        </div>

        <!-- Results -->
        <div id="box8" class="box">
            <div class="row align-middle full-box-height" id="content">
                <div class="col topCenterText">
                    <div class='center-text-box'>
                        <h1>Challenge Complete!</h1>
                        <div id='result-incorrect'>
                            <p>It was a good try, but to successfully complete a challenge, you need a score of 80% or higher on the challenge questions.</p>
                            <p>You earned 0 points this time.</p>
                            <p>You do have the opportunity to retake this challenge and earn some points!</p>
                            <p>Better luck next time!</p>
                        </div>
                        <div id='result-closed'>
                            <p>Looks like you still have some work to do with this topic. You did not earn a
                            passing score and no additional points will be added to your total.</p>
                            <p>While you wait for the next challenge to hit your inbox, you might want to return to your class materials and review some of the information around this specific topic.</p>
                            <p>This challenge will remain open so you can put that review to the test by taking the challenge again. (No points can be earned any longer for this challenge.)</p>
                            <p>A new challenge will be coming soon. Better luck next time!</p>
                        </div>
                        <div id='result-three'>
                            <p>You’ve completed this challenge review. If you would like to review this topic in
                                greater depth, you may want to return to your class materials and review some of the
                                information presented there.</p>
                            <p>As a reminder, no points will be earned for completing a challenge review.</p>
                        </div>
                        <div id='result-correct'>
                            <p>Great work!</p>
                            <p>You just earned yourself <span id="score">10</span> points.</p>
                            <p>Remember, you can’t earn any additional points from this challenge, but you can use
                                it as reference.</p>
                            <p>Look for your next challenge soon.</p>
                        </div>
                        <!-- <div>For more information on this topic, check out some additional resources <a
                                id="additional-resource" href="" target="_blank">here</a>.</div> -->
                    </div>
                </div>
                <div class="col topCenterText col-sm">
                    <div>
                        <button id="gameover-btn" type="submit">CONTINUE</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id='progress-bar'>
        <div class='line'></div>
        <div class='pin intro'></div>
        <div class='pin vid'></div>
        <div class='pin quest'></div>
        <div class='pin quest'>
            <div class='q-points'></div>
        </div>
        <div class='pin quest'>
            <div class='q-points'></div>
        </div>
        <div class='pin quest'>
            <div class='q-points'></div>
        </div>
        <div class='pin quest'></div>
        <div class='pin conclusion'></div>
        <div class='score'>0</div>
    </div>

	<footer><div>CHALLENGE #2</div></footer>
    <!-- <script src="../../bin/footerChallenge.js"></script> -->
    <script src="scripts/polyfill.min.js"></script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="scripts/jquery-3.4.1.js"></script>
    <script src="scripts/popper.js/dist/umd/popper.min.js"></script>
    <script src="scripts/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script defer src="https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/7.5.0/firebase-auth.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/7.5.0/firebase-database.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/7.5.0/firebase-storage.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/7.5.0/firebase-functions.js"></script>
    <!-- <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-firestore.js"></script> -->
    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <!-- <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script> -->
    <!-- <script defer src="src/fb-core-js.js"></script> -->
    <script defer src="bin/fb-auth.js"></script>
   
    <script>
        var ifrm = window.frameElement; // reference to iframe element container
        var doc = ifrm.ownerDocument; // reference to container's document
        var thisClass = function () {
            if (ifrm.src.includes("hd")) {
                return "HD";
            } else if (ifrm.src.includes("ld")) {
                return "LD";
            } else if (ifrm.src.includes("vps")) {
                return "VPS";
            }
        }
        $('#challenge-btn', window.parent.document).html('VPERK$');
        var thisChallengNumber = 5;
        $('#additional-resource').attr('href', 'https://valvoline.widencollective.com/portals/8ci2unfu/MyPortalOct15,2020');
        parent.setBookmarking(thisClass, thisChallengNumber, .2);
        parent.retrieveAttempt(thisChallengNumber, "LD");
        //QUIZ

        
        var hsArray = [0, 0, 0];
	       var hsString = '1,1,1';
	       var hscheckProg = function (num) {
	           hsArray[num] = 1;
	           if (hsArray.toString() == hsString) {
	               $('.hs-continue').parent().removeClass("hidden").hide().fadeIn();
	           }
	       };
	       var revealPlus = function () {
			   if ($(this).css("opacity") == "1"){
	           var elIndex = $(this).parent().attr("class").trim().slice(-1);
	           $('.clk-reveal-complete-x').removeClass('clk-reveal-complete-x').addClass('clk-reveal-complete-plus');
			   $('.clk-reveal-plus').css({"opacity": ".5", "pointer-events": "none"});
			   $('.clk-reveal-complete-plus').css({"opacity": ".5", "pointer-events": "none"});
			   $(this).css({"opacity": "1", "pointer-events": "auto"});
	           $(this).addClass('clk-reveal-complete-x')
	           $('.clk-reveal-x').addClass('clk-reveal-plus');
	           $('.clk-reveal-x').removeClass('clk-reveal-x');
	           $(this).unbind();
	           $(this).bind('click', revealX);
	           $(this).removeClass('clk-reveal-plus');
	           $(this).addClass('clk-reveal-x');
	           $(this).parent().parent().find('.content-box').hide();
	           $('.clk-reveal-plus').unbind();
	           $('.clk-reveal-plus').bind('click', revealPlus);
	           $('.content-box-' + elIndex).fadeIn();
               hscheckProg(elIndex-1)
               console.log(elIndex)
               console.log($('.content-box-' + elIndex))
}
	       }

	       var revealX = function () {
	           $('.clk-reveal-complete-x').removeClass('clk-reveal-complete-x');
	           $(this).addClass('clk-reveal-complete-plus');
			   $('.clk-reveal-plus').css({"opacity": "1", "pointer-events": "auto"});
			   $('.clk-reveal-complete-plus').css({"opacity": "1", "pointer-events": "auto"});
	           $('.clk-reveal-x').addClass('clk-reveal-plus');
	           $('.clk-reveal-x').removeClass('clk-reveal-x');
	           $(this).unbind();
	           $(this).bind('click', revealPlus);
	           $(this).removeClass('clk-reveal-x')
	           $(this).addClass('clk-reveal-plus');
	           $('.clk-reveal-plus').unbind();
	           $('.clk-reveal-plus').bind('click', revealPlus);
	           $('.content-box').hide();
	       }
        //console.log(thisClass())
        ////////console.log(parent.activities)
        // $(doc).find('header').css('border-bottom', 'none');
        ifrm.style.top = '-118px';
        ifrm.style.position = 'absolute';
        ifrm.style.height = '100%';
        ifrm.style.zIndex = '1005';

        var quiz = [{
            // Q1
            question: '<p><font class="emphasisBold">VPERK$</font> brings back existing consumers with exciting _________ offers and the loyalty program.</p>',
            type: 'MC',
            answers: [
                'seasonal',
                'weekly',
                'quarterly',
                'daily'
            ],
            choices: [],
            correct: 1,
            correct_rem: '<p>That’s right! <font class="emphasisBold">VPERK$</font> brings back existing consumers with exciting seasonal offers and the loyalty program.</p>',
            incorrect_rem: '<p>That’s not the answer. Try again.</p>',
            fail_rem: '<p>That’s not correct. <font class="emphasisBold">VPERK$</font> brings back existing consumers with exciting seasonal offers and the loyalty program.</p>'
        }, {
            // Q2
            question: '<p>As part of the loyalty program process, _______ submit their invoice for a qualified service to valvolineperks.com.</p>',
            type: 'MC',
            answers: [
                'installers',
                'Valvoline reps',
                'consumers',
                'service writers'
            ],
            choices: [],
            correct: 3,
            correct_rem: '<p>That’s right! Consumers submit their invoice for a qualified service to valvolineperks.com, and then, when available, they will receive a coupon for their next qualified service.</p>',
            incorrect_rem: '<p>That’s not the answer. Try again.</p>',
            fail_rem: '<p>That’s not correct. Consumers submit their invoice for a qualified service to valvolineperks.com, and then, when available, they will receive a coupon for their next qualified service.</p><p>You will not receive any points for this question.</p>'
        }, {
            // Q3
            question: '<p>Valvoline™ funds the coupons, marketing materials, training tools and _______________ needed for the VPERK$ program.</p>',
            type: 'MC',
            answers: [
                'equipment',
                'customer calls',
                'consumer rewards',
                'customer lists'
            ],
            choices: [],
            correct: 3,
            correct_rem: '<p>That’s right! Valvoline™ funds the coupons, marketing materials, training tools and consumer rewards that are part of VPERK$.</p>',
            incorrect_rem: '<p>That’s not the answer. Try again.</p>',
            fail_rem: '<p>That’s not correct. Valvoline™ funds the coupons, marketing materials, training tools and consumer rewards that are part of VPERK$.</p><p>You will not receive any points for this question.</p>'
        }];

        var passed = true;
        var questionPointsPossible = 60;
        var points = [20, 20, 20]
        var attemptsLeft = [2, 2, 2];
        var passPercent = 80;
        var boxLocation = 0;
        var attemptCount = 0;

        var totalPoints = function () {
            var sum = 0;
            for (var i = 0; i < points.length; i++) {
                sum += points[i]
            }
            return sum;

        }();

        var q = function () {
            return quiz[qIndex];
        }

        var currentAnswer;

        function RenderQuestion() {
            $('.clk-reveal-plus').bind('click', revealPlus);
				for (var qIndex = 0; qIndex < quiz.length; qIndex++) {
					$('.question-' + (qIndex + 1) + ' #question-num').html('Question ' + (qIndex + 1));
					$('.question-' + (qIndex + 1) + ' .question-text').html(quiz[qIndex].question);
					for (var i = 0; i < quiz[qIndex].answers.length; i++) {
						quiz[qIndex].choices.push(i + 1)
						var div = document.createElement('div')
						$(div).append('<input id="button' + (i + 1) + '" type="radio" name="quiz" value="' + (i + 1) +
							'" /><div id="answer' + (i + 1) + '"class="answer pointer"><\/div>');
						$(div).append('<label for="button' + (i + 1) + '">' + quiz[qIndex].answers[i] + '<\/label>');
						$('.question-' + (qIndex + 1) + ' .answer-container').append(div);
					}
				}
				var radioCheck = function () {
					$('.remediation-retry').unbind('click', runCheck);
					$('.reveal-btn-m').unbind('click', runCheck);
					$('.reveal-btn-m').bind('click', runCheck);
					currentAnswer = $(this).attr('id').slice(-1);
					currentQuestion = $(this).parent().parent().parent().attr('class').slice(-1);
					console.log('currentQuestion:' + currentQuestion)
					console.log(quiz[currentQuestion - 1].choices)
					if (quiz[currentQuestion - 1].choices[currentAnswer - 1] != 0 && attemptsLeft[currentQuestion - 1] < 2) {
						$('.remediation-retry').bind('click', runCheck);
						$('.remediation-retry .warn-sel-ans').css('opacity', '0');
					} else {
						$('.remediation-retry').unbind('click', runCheck);
						$('.remediation-retry .warn-sel-ans').css('opacity', '0');
					}
					
					if (attemptsLeft[currentQuestion - 1] == 0) {
						$('.reveal-btn').unbind('click', runCheck);
					} else {
						$('.reveal-btn').unbind('click', runCheck);
						$('.reveal-btn').bind('click', runCheck);
					}

					if (quiz[currentQuestion - 1].choices[currentAnswer - 1] == 0) {
						$('.reveal-btn-m').bind('click', runCheck);
					}

					if (quiz[currentQuestion - 1].type == "MC") {
						$('.answer-on').removeClass('answer-on').addClass('pointer');
						$(this).addClass("answer-on").removeClass('pointer');
					} else if (quiz[currentQuestion - 1].type == "MR") {
						$('.answer-on').removeClass('answer-on').addClass('pointer');
						$(this).addClass("answer-on").removeClass('pointer');
					}
				}

				$('.answer').bind('click', radioCheck);
				$('.remediation-retry').on('click', function () {
					//console.log($(this))
					$('.remediation-retry').unbind('click', runCheck);
					if (quiz[currentQuestion - 1].choices[currentAnswer - 1] == 0) {
						if ($(window).width() < 999) {
							$('.attempt-1').hide();
							$('.attempt-2').hide();
							$(this).parent().addClass("m-hide")
							$(this).parent().parent().parent().parent().find('.attempt-container').addClass("m-hide");
						} else {
							$(this).parent().parent().parent().parent().find('.attempt-container').removeClass("m-hide")
							$(this).parent().removeClass("m-hide");
							$('.remediation-retry .warn-sel-ans').css('opacity', '1');
						}
					}
				})

				$('.remediation-continue').on('click', function () {
					$('.reveal-btn').unbind('click', runCheck);
					$('.reveal-btn-m').unbind('click', runCheck);

					if (currentQuestion >= quiz.length - 1) {
						var userPoints = 0;
						for (var i = 0; i < points.length; i++) {
							userPoints += points[i]
						}
						scorePercent = parseInt((userPoints / totalPoints) * 100);
						var attempt = parent.intAttempt;
                        console.log('Check score: ' + scorePercent >= passPercent)
						if (scorePercent >= passPercent && attempt < 4) {
							$('#result-correct').show();
							$('#gameover-btn').show();
							$('#result-incorrect').hide();
							$('#result-closed').hide();
							$('#result-three').hide();
							$('#result-retry').hide();
							$('#retry-btn').hide();
							console.log('Passed in first 3 attempts')
						} else if (scorePercent < passPercent && attempt < 4) {
							passed = false;
							$('#result-incorrect').show();
							$('#gameover-btn').show();
							$('#result-retry').hide();
							$('#result-closed').hide();
							$('#result-three').hide();
							$('#result-correct').hide();
							$('#retry-btn').hide();
							console.log('Failed in one of the first 3 attempts')
						} else if (attempt == 5) {
							passed = false;
							$('#result-incorrect').hide();
							$('#gameover-btn').show();
							$('#result-retry').hide();
							$('#result-closed').show();
							$('#result-three').hide();
							$('#result-correct').hide();
							$('#retry-btn').hide();
							console.log('Challenge Closed. Reviewing. No Points awarded.')
						} else if (attempt == 4) {
							$('#result-incorrect').hide();
							$('#gameover-btn').show();
							$('#result-retry').hide();
							$('#result-closed').hide();
							$('#result-three').show();
							$('#result-correct').hide();
							$('#retry-btn').hide();
							console.log('Just reviewing. Good Job!')
						}
					}
				})

				//Returns array of selected answers from a MR question
				function getAnswers() {
					var returnAnswers = [];
					$(".answer").each(function () {
						if ($(this).hasClass('answer-on')) {
							returnAnswers.push(Number($(this).attr('id').slice(-1)));
						}
					});
					return returnAnswers;
				}

				function arraysEqual(_arr1, _arr2) {
					if (!Array.isArray(_arr1) || !Array.isArray(_arr2) || _arr1.length !== _arr2.length)
						return false;
					var arr1 = _arr1.concat().sort();
					var arr2 = _arr2.concat().sort();
					for (var i = 0; i < arr1.length; i++) {
						if (arr1[i] !== arr2[i])
							return false;
					}
					return true;
				}

				var runCheck = function () {
                    console.log("run check")
                    console.log(currentQuestion)
					if (currentQuestion != undefined) {
						$('.remediation-retry').unbind('click', runCheck);
							if (attemptsLeft[currentQuestion - 1] >= 0) {
								var correctAnswer = quiz[currentQuestion - 1].correct;
								var thisQuestionAttemptsLeft = attemptsLeft[currentQuestion - 1];
								if (quiz[currentQuestion - 1].type == "MC") {
									$('.reveal-btn').unbind('click', runCheck);
									quiz[currentQuestion - 1].choices[currentAnswer - 1] = 0;
									for (var i = 0; i < quiz[currentQuestion - 1].choices.length; i++) {
										if (quiz[currentQuestion - 1].correct == currentAnswer) {
											//correct answer
											$('.question-' + currentQuestion + ' #answer' + (i + 1)).unbind().removeClass(
												"pointer");
										} else if (quiz[currentQuestion - 1].choices[i] == 0) {
											//incorrect answer
											$('.question-' + currentQuestion + ' #answer' + (i + 1)).unbind().removeClass(
												"pointer answer");
										} else if (attemptsLeft[currentQuestion - 1] == 0) {
											//failed question
											$('.question-' + currentQuestion + ' #answer' + (i + 1)).unbind().removeClass(
												"pointer");
										} else {
											//rebind answers
											$('.question-' + currentQuestion + ' #answer' + (i + 1)).unbind();
											$('.question-' + currentQuestion + ' #answer' + (i + 1)).bind('click', radioCheck).addClass("pointer");
										}
									}

									if (quiz[currentQuestion - 1].correct == currentAnswer) {
										$('.reveal-btn:eq(' + (currentQuestion - 1) + ')').hide();
										$('.question-bg-box:eq(' + (currentQuestion - 1) + ')').addClass('qbg-attempt-3');
										$('.reveal-btn:eq(' + (currentQuestion - 1) + ')').hide();
										$('.remediation:eq(' + (currentQuestion - 1) + ')').removeClass('m-hide')
										$('.attempt-container:eq(' + (currentQuestion - 1) + ')').removeClass("m-hide")
										$('.remediation:eq(' + (currentQuestion - 1) + ')').addClass('remediation-attempt-correct');
										$('.remediation:eq(' + (currentQuestion - 1) + ')').show();
										$('.remediation-retry:eq(' + (currentQuestion - 1) + ')').hide();
										$('.remediation-continue:eq(' + (currentQuestion - 1) + ')').show();
										$('.remediation-txt:eq(' + (currentQuestion - 1) + ')').removeClass('white-txt').html(quiz[currentQuestion - 1].correct_rem);
										$('.remediation-icon:eq(' + (currentQuestion - 1) + ')').css("background-image",
											"url(images/challenge_2/images/Correct_Icon.png)");
										$('.question-' + currentQuestion + ' #answer' + currentAnswer).css("background-image",
											"url(images/challenge_2/images/Correct.png)").addClass('remediation-reveal')
											.removeClass("pointer answer");
										$('.question-' + currentQuestion + ' .answer').css('cursor', 'auto');

										$('.attempt-1').hide();
										$('.attempt-2').hide();
									} else {
										$('.answer-on').removeClass('answer-on');
										$('.reveal-btn:eq(' + (currentQuestion - 1) + ')').hide();
										$('.remediation-continue:eq(' + (currentQuestion - 1) + ')').hide();
										$('.remediation-txt:eq(' + (currentQuestion - 1) + ')').addClass('white-txt').html(quiz[currentQuestion - 1].incorrect_rem);
										$('.remediation-icon:eq(' + (currentQuestion - 1) + ')').css("background-image",
											"url(images/challenge_2/images/Incorrect_Icon.png)");
										$('.question-' + currentQuestion + ' #answer' + currentAnswer).css("background-image",
											"url(images/challenge_2/images/Incorrect.png)").addClass('remediation-reveal')
											.removeClass("pointer answer");
                                            if (attemptsLeft[currentQuestion - 1] >= 0 && points[currentQuestion - 1] > 0) {
											//console.log("INCORRECT RESPONSE: " + attemptsLeft[currentQuestion - 1])
											points[currentQuestion - 1] = points[currentQuestion - 1] - 5;
										}
										if (attemptsLeft[currentQuestion - 1] == 2) {
											$('.question-bg-box:eq(' + (currentQuestion - 1) + ')').addClass('qbg-attempt-1');
											$('.remediation:eq(' + (currentQuestion - 1) + ')').addClass('remediation-attempt-1');
											$('.remediation:eq(' + (currentQuestion - 1) + ')').show();
											$('.attempt-1').css('display', 'flex');
										} else if (attemptsLeft[currentQuestion - 1] == 1) {
											$('.question-bg-box:eq(' + (currentQuestion - 1) + ')').addClass('qbg-attempt-2');
											$('.remediation:eq(' + (currentQuestion - 1) + ')').removeClass('m-hide')
											$('.attempt-container:eq(' + (currentQuestion - 1) + ')').removeClass("m-hide")
											$('.remediation:eq(' + (currentQuestion - 1) + ')').addClass('remediation-attempt-2');
											$('.remediation:eq(' + (currentQuestion - 1) + ')').show();
											$('.attempt-1').hide();
											$('.attempt-2').css('display', 'flex');
										} else if (attemptsLeft[currentQuestion - 1] == 0) {
											$('.attempt-1').hide();
											$('.attempt-2').hide();
											$('.question-bg-box:eq(' + (currentQuestion - 1) + ')').addClass('qbg-attempt-3');
											$('.remediation:eq(' + (currentQuestion - 1) + ')').removeClass('m-hide')
											$('.attempt-container:eq(' + (currentQuestion - 1) + ')').removeClass("m-hide")
											$('.remediation:eq(' + (currentQuestion - 1) + ')').addClass('remediation-attempt-3');
											$('.remediation:eq(' + (currentQuestion - 1) + ')').show();
											$('.remediation-retry:eq(' + (currentQuestion - 1) + ')').hide();
											$('.remediation-continue:eq(' + (currentQuestion - 1) + ')').show();
											$('.remediation-txt:eq(' + (currentQuestion - 1) + ')').removeClass('white-txt').html(quiz[currentQuestion - 1].fail_rem);
											$('#progress-bar .quest .q-points').eq(currentQuestion - 1).parent().addClass('quest-retry');
											$('.question-' + currentQuestion + ' .answer-container div').each(function (index, elem) {
												$('.question-' + currentQuestion + ' .answer').unbind().css('cursor', 'auto');
											});
										}
										attemptsLeft[currentQuestion - 1]--;
										updateProgressTracker();
									}
								}
							} // end of runCheck
					}
					$('.reveal-btn').bind('click', runCheck);
					$('.reveal-btn-m').bind('click', runCheck);
				}
            }
            
        (function () {
            $('#header-image', window.parent.document).fadeIn();
            $('.next').click(function (box) {

                var curLocation = boxLocation + 1;
                var nextLocation = boxLocation + 2;
                var currentBox = $('#box' + curLocation)
                var nextBox = $('#box' + nextLocation)
                $(currentBox).animate({
                    left: '-50%'
                }, 500, function () {
                    $(currentBox).css('left', '150%');
                    $(currentBox).appendTo('#container');
                });
                $(nextBox).animate({
                    left: '50%'
                }, 500);

                if (curLocation == 4) { $('#box5 #video-popup-1-mask').fadeOut(); }
                boxLocation++;
                nextAction(curLocation);
                updateProgressTracker()
            });

            $('.back-btn').click(function () {
                var preLocation = boxLocation;
                var curLocation = boxLocation + 1;
                var currentBox = $('#box' + curLocation)
                var prevBox = $('#box' + preLocation)
                console.log(curLocation)
                $(currentBox).animate({
                    left: '150%'
                }, 500, function () {
                    $(prevBox).css('left', ' ');
                    $(prevBox).prependTo('#container');
                });
                $(prevBox).css('left', '-150%').animate({
                    left: '50%'
                }, 500);

                if (curLocation == 3 || curLocation == 5) {
                    $('video').each(function() {
    $(this).get(0).pause();

    $('#box5 #video-container').hide()

            // $('video')[0].pause();
});

                }
                boxLocation--;
                updateProgressTracker()
                backAction(boxLocation)
            });


            $('#gameover-btn').on('click', function (e) {
                parent.exitChallenge();
				if (passed && parent.intAttempt != 4) {
					challengeComplete(thisClass(), thisChallengNumber, score, true);
				} else if (parent.intAttempt != 4) {
					challengeComplete(thisClass(), thisChallengNumber, score, false);
				} else {
					parent.navigateIframe("portal.html");
				}
				$('#gameover-btn').unbind("click");
	        })

            var $video = $('video'),
                $window = $('#video-container');
                $footer = $('footer')

            $(window).resize(function () {
                var footerHeightStr = $('footer').css('height');
                var footerHeight = (footerHeightStr.substring(0, footerHeightStr.length - 2) - 1);
                var height = $window.height();
                $video.css('height', height);
                var videoWidth = $video.width(),
                    windowWidth = $window.width(),
                    marginLeftAdjust = (windowWidth - videoWidth) / 2;
                $video.css({
                    'height': height
                });
            }).resize();

        })();

        function nextBox(el) {
            $('#box5 #video-popup-1-mask').fadeOut();
            var curLocation = boxLocation + 1;
            var currentBox = $('#box' + curLocation)
            $(currentBox).animate({
                left: '-50%'
            }, 500, function () {
                $(currentBox).css('left', '150%');
                $(currentBox).appendTo('#container');
            });
            $(currentBox).next().animate({
                left: '50%'
            }, 500);
            boxLocation++;
            nextAction(curLocation);
            updateProgressTracker()
        }

        function playVideo_1() {
            $('#box2 #video-container').fadeIn();
            $('#box2 #video-popup-1-mask').fadeOut();
            $('#box2 video')[0].play();
            $('#box2').parent().css('overflow', 'hidden !important');
            $('#box2 #content').css('display', 'none');
        }

        function nextAction(groupIndex) {
            console.log('next action switch: ' + groupIndex + " " + typeof (groupIndex))
            switch (groupIndex) {
                case "0":

                    break;
                case "1":

                    break;
                case "2":

                    break;
                case "3":

                    break;
                case 1:

                    break;
                case 2:

                    break;
                case 3:

                    break;
                case "calcComplete":

                    break;
                case 5:

                    break;
                case 9:

                    break;
                default:
                    break;
            }
        }

        function backAction(groupIndex) {
            console.log('back action switch: ' + groupIndex + " " + typeof (groupIndex))
            switch (groupIndex) {
                case "0":

                    break;
                case "1":

                    break;
                case 2:

                    break;
                case 3:

                    break;
                case 4:

                    break;
                case "4":

                    break;
                case 9:

                    break;
                default:
                    break;
            }
        }


        function updateProgressTracker() {
            var userPoints = 0
            for (var i = 0; i < points.length; i++) {
                userPoints += points[i]
            }
            score = (userPoints);
            $('.score').html(score + " POINTS")
            $('#score').html(score)
            $('#progress-bar .quest .q-points').each(function (i, obj) {
                $('#progress-bar .quest .q-points').eq(i).html(points[i])
            })
console.log(boxLocation)
            switch (boxLocation) {

                case 0:
                    console.log("0")
                    $('#progress-bar .pin').eq(boxLocation).addClass('intro')
                    $('#progress-bar .pin').eq(boxLocation).removeClass('intro-down');
                    $('#progress-bar .pin').eq(boxLocation + 1).removeClass('vid-down');
                    break;
                case 1:
                    console.log("1")
                    $('#progress-bar .pin').eq(boxLocation - 1).addClass('intro-down')
                    $('#progress-bar .pin').eq(boxLocation - 1).removeClass('intro');
                    $('#progress-bar .pin').eq(boxLocation).addClass('vid-down');
                    $('#progress-bar .pin').eq(boxLocation + 1).removeClass('quest-down');
                    break;
                case 2:
                    $('#progress-bar .pin').eq(boxLocation - 1).removeClass('vid-down');
                    $('#progress-bar .pin').eq(boxLocation).addClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation + 1).removeClass('quest-down');
                    break;
                    case 3:
					$('#progress-bar .pin').eq(boxLocation - 1).removeClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation).addClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation + 1).removeClass('quest-down');
					break;
                // case 3:
                //     $('#progress-bar .pin').eq(boxLocation - 1).removeClass('quest-down');
                //     $('#progress-bar .pin').eq(boxLocation).addClass('quest-down');
                //     $('#progress-bar .pin').eq(boxLocation + 1).removeClass('quest-down');
                //     break;
                // case 4:
                //     $('#progress-bar .pin').eq(boxLocation - 1).removeClass('quest-down');
                //     $('#progress-bar .pin').eq(boxLocation).addClass('quest-down');
                //     $('#progress-bar .pin').eq(boxLocation + 1).removeClass('quest-down');
                //     break;
                case 4:
                    $('#progress-bar .pin').eq(boxLocation - 1).removeClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation).addClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation + 1).removeClass('quest-down');
                    break;
                case 5:
                    $('#progress-bar .pin').eq(boxLocation - 1).removeClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation).addClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation + 1).removeClass('quest-down');
                    break;
                case 6:
                    $('#progress-bar .pin').eq(boxLocation - 1).removeClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation).addClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation + 1).removeClass('conclusion-down');
                    break;
                case 7:
                    $('#progress-bar .pin').eq(boxLocation - 1).removeClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation).addClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation + 1).removeClass('conclusion-down');
                    break;
                case 8:
                    $('#progress-bar .pin').eq(boxLocation - 1).removeClass('quest-down');
                    $('#progress-bar .pin').eq(boxLocation).addClass('conclusion-down');
                    break;
                default:
                   // $('#progress-bar .pin').eq(0).removeClass('intro-down');
                    //$('#progress-bar .pin').eq(1).removeClass('scene-down');
                    break;
            }
        };
        updateProgressTracker();
        RenderQuestion();
    </script>
     <script src="bin/rules_popup_c5_ld.js"></script>
</body>

</html>
