<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrapesJS Full Page Editor</title>
    <link rel="stylesheet" href="https://unpkg.com/grapesjs/dist/css/grapes.min.css">
    <style>
        body, html {
            height: 100%;
            margin: 0;
        }
        #gjs {
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="gjs">
        <!-- Initial content (optional) -->
        <div class="editable" style="padding: 50px; text-align: center;">
            <h1>Hello, GrapesJS!</h1>
            <p>Start building your web page here.</p>
        </div>
    </div>
    <script src="https://unpkg.com/grapesjs"></script>
    <script>
        const editor = grapesjs.init({
            container: '#gjs',
            fromElement: true,
            height: '100%',
            width: 'auto',
            storageManager: {
                type: 'local', // Store data locally
                autosave: true, // Auto-save changes
                autoload: true, // Auto-load previous data
            },
            blockManager: {
                appendTo: '#blocks',
                blocks: [
                    {
                        id: 'section',
                        label: '<b>Section</b>',
                        attributes: { class:'gjs-block-section' },
                        content: `<section>
                            <h1>This is a simple title</h1>
                            <p>This is just a Lorem text: Lorem ipsum dolor sit amet</p>
                        </section>`,
                    },
                    {
                        id: 'text',
                        label: 'Text',
                        content: '<div data-gjs-type="text">Insert your text here</div>',
                    },
                    {
                        id: 'image',
                        label: 'Image',
                        content: { type: 'image' },
                        activate: true,
                    },
                ]
            },
            layerManager: {
                appendTo: '.layers-container'
            },
            selectorManager: {
                appendTo: '.styles-container'
            },
            styleManager: {
                appendTo: '.styles-container',
                sectors: [{
                    name: 'General',
                    buildProps: ['float', 'display', 'position', 'top', 'right', 'left', 'bottom'],
                },{
                    name: 'Dimension',
                    buildProps: ['width', 'height', 'max-width', 'min-height', 'margin', 'padding'],
                },{
                    name: 'Typography',
                    buildProps: ['font-family', 'font-size', 'font-weight', 'letter-spacing', 'color', 'line-height', 'text-shadow'],
                },{
                    name: 'Decorations',
                    buildProps: ['opacity', 'border-radius', 'border', 'box-shadow', 'background'],
                },{
                    name: 'Extra',
                    buildProps: ['transition', 'perspective', 'transform'],
                }]
            },
            traitManager: {
                appendTo: '.traits-container'
            },
            plugins: ['gjs-preset-webpage'],
            pluginsOpts: {
                'gjs-preset-webpage': {}
            }
        });

        // Add panels and buttons
        editor.Panels.addPanel({
            id: 'basic-actions',
            el: '.panel__basic-actions',
            buttons: [
                {
                    id: 'visibility',
                    active: true, // active by default
                    label: '<u>Visibility</u>',
                    command: 'sw-visibility', // Built-in command
                }, {
                    id: 'export',
                    className: 'btn-open-export',
                    label: 'Export',
                    command: 'export-template',
                    context: 'export-template', // For grouping context of buttons from the same panel
                }, {
                    id: 'show-json',
                    className: 'btn-show-json',
                    label: 'JSON',
                    context: 'show-json',
                    command(editor) {
                        editor.Modal.setTitle('Components JSON')
                            .setContent(`<textarea style="width:100%; height: 250px;">
${JSON.stringify(editor.getComponents())}
</textarea>`)
                            .open();
                    },
                }
            ]
        });
    </script>
</body>
</html>
